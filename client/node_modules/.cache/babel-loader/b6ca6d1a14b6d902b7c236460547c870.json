{"ast":null,"code":"import { ApolloClient, InMemoryCache, HttpLink } from 'apollo-boost';\nimport fetch from 'isomorphic-unfetch';\nvar apolloClient = null;\n\nfunction create(initialState) {\n  var isBrowser = typeof window !== 'undefined';\n  var httpLink = new HttpLink({\n    uri: 'http://localhost:3000/graphql-beta',\n    credentials: 'same-origin',\n    fetch: !isBrowser && fetch\n  });\n  return new ApolloClient({\n    connectToDevTools: isBrowser,\n    ssrMode: !isBrowser,\n    link: httpLink,\n    cache: new InMemoryCache().restore(initialState || {})\n  });\n}\n/**\n * @name initApollo\n * @param {Object} initialState Initial state to initialize the Apollo client with\n * @return {ApolloClient} Apollo client instance\n */\n\n\nexport default function initApollo(initialState) {\n  // Make sure to create a new client for every server-side request so that data\n  // isn't shared between connections\n  if (typeof window === 'undefined') {\n    return create(initialState);\n  } // Reuse client on the client-side\n\n\n  if (!apolloClient) {\n    apolloClient = create(initialState);\n  }\n\n  return apolloClient;\n}","map":{"version":3,"sources":["/Users/malcolm/Dev/VS/amis/All-Mankind/client/lib/apollo/init-apollo.js"],"names":["ApolloClient","InMemoryCache","HttpLink","fetch","apolloClient","create","initialState","isBrowser","window","httpLink","uri","credentials","connectToDevTools","ssrMode","link","cache","restore","initApollo"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,EAAsCC,QAAtC,QAAsD,cAAtD;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAEA,IAAIC,YAAY,GAAG,IAAnB;;AAEA,SAASC,MAAT,CAAiBC,YAAjB,EAA+B;AAE7B,MAAMC,SAAS,GAAG,OAAOC,MAAP,KAAkB,WAApC;AACA,MAAMC,QAAQ,GAAG,IAAIP,QAAJ,CAAa;AAC5BQ,IAAAA,GAAG,EAAE,oCADuB;AAE5BC,IAAAA,WAAW,EAAE,aAFe;AAG5BR,IAAAA,KAAK,EAAE,CAACI,SAAD,IAAcJ;AAHO,GAAb,CAAjB;AAMA,SAAO,IAAIH,YAAJ,CAAiB;AACtBY,IAAAA,iBAAiB,EAAEL,SADG;AAEtBM,IAAAA,OAAO,EAAE,CAACN,SAFY;AAGtBO,IAAAA,IAAI,EAAEL,QAHgB;AAItBM,IAAAA,KAAK,EAAE,IAAId,aAAJ,GAAoBe,OAApB,CAA4BV,YAAY,IAAI,EAA5C;AAJe,GAAjB,CAAP;AAMD;AAED;;;;;;;AAKA,eAAe,SAASW,UAAT,CAAqBX,YAArB,EAAmC;AAChD;AACA;AACA,MAAI,OAAOE,MAAP,KAAkB,WAAtB,EAAmC;AACjC,WAAOH,MAAM,CAACC,YAAD,CAAb;AACD,GAL+C,CAOhD;;;AACA,MAAI,CAACF,YAAL,EAAmB;AACjBA,IAAAA,YAAY,GAAGC,MAAM,CAACC,YAAD,CAArB;AACD;;AAED,SAAOF,YAAP;AACD","sourcesContent":["import { ApolloClient, InMemoryCache, HttpLink } from 'apollo-boost';\nimport fetch from 'isomorphic-unfetch';\n\nlet apolloClient = null;\n\nfunction create (initialState) {\n\n  const isBrowser = typeof window !== 'undefined';\n  const httpLink = new HttpLink({\n    uri: 'http://localhost:3000/graphql-beta',\n    credentials: 'same-origin',\n    fetch: !isBrowser && fetch\n  });\n\n  return new ApolloClient({\n    connectToDevTools: isBrowser,\n    ssrMode: !isBrowser,\n    link: httpLink,\n    cache: new InMemoryCache().restore(initialState || {})\n  });\n}\n\n/**\n * @name initApollo\n * @param {Object} initialState Initial state to initialize the Apollo client with\n * @return {ApolloClient} Apollo client instance\n */\nexport default function initApollo (initialState) {\n  // Make sure to create a new client for every server-side request so that data\n  // isn't shared between connections\n  if (typeof window === 'undefined') {\n    return create(initialState);\n  }\n\n  // Reuse client on the client-side\n  if (!apolloClient) {\n    apolloClient = create(initialState)\n  }\n\n  return apolloClient;\n} "]},"metadata":{},"sourceType":"module"}